
<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>İlan Listesi</title>
    <style>
        body { font-family: Arial, sans-serif; background: #f4f4f4; padding: 20px; }
        .controls { margin-bottom: 20px; }
        button, input[type="file"] { margin-right: 10px; padding: 10px; }
        .card { background: #fff; padding: 15px; margin-bottom: 15px; border-radius: 8px; box-shadow: 0 0 8px rgba(0,0,0,0.1); }
        .card h3 { margin: 0 0 10px 0; }
    </style>
</head>
<body>
    <h1>İlan Listesi</h1>
    <div class="controls">
        <input type="file" id="jsonInput" accept=".json">
        <input type="text" id="search" placeholder="Arama yap...">
        <button onclick="filterList()">Filtrele</button>
        <button onclick="clearSearch()">Temizle</button>
    </div>
    <div id="list"></div>

    <script>
        let listings = [];

        document.getElementById('jsonInput').addEventListener('change', function(e) {
            const reader = new FileReader();
            reader.onload = function() {
                listings = JSON.parse(reader.result);
                displayListings(listings);
            };
            reader.readAsText(e.target.files[0]);
        });

        function displayListings(data) {
            const container = document.getElementById('list');
            container.innerHTML = "";
            data.forEach(item => {
                const card = document.createElement('div');
                card.className = 'card';
                card.innerHTML = `
                    <h3>${item.aciklama}</h3>
                    <p><strong>İl:</strong> ${item.il} - <strong>İlçe:</strong> ${item.ilce} - <strong>Mahalle:</strong> ${item.mahalle}</p>
                    <p><strong>Tip:</strong> ${item.tip} - <strong>Durum:</strong> ${item.satkir}</p>
                    <p><strong>Net m²:</strong> ${item.m2net} - <strong>Brüt m²:</strong> ${item.m2brut}</p>
                    <p><strong>Fiyat:</strong> ${item.sfiyat} TL ${item.kfiyat ? " / Kira: " + item.kfiyat + " TL" : ""}</p>
                    <p><strong>Özellikler:</strong> ${item.ozellikler.join(', ')}</p>
                `;
                container.appendChild(card);
            });
        }

        function filterList() {
            const search = document.getElementById('search').value.toLowerCase();
            const filtered = listings.filter(item =>
                item.aciklama.toLowerCase().includes(search) ||
                item.mahalle.toLowerCase().includes(search) ||
                item.ilce.toLowerCase().includes(search) ||
                item.blok?.toLowerCase().includes(search) ||
                item.ozellikler?.join(' ').toLowerCase().includes(search)
            );
            displayListings(filtered);
        }

        function clearSearch() {
            document.getElementById('search').value = "";
            displayListings(listings);
        }
    </script>
</body>
</html>
